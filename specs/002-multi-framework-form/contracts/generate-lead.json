{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Generate Lead Event",
  "description": "Conversion event for qualified leads with strict firing criteria",
  "type": "object",
  "required": [
    "event",
    "currency",
    "value",
    "cuft_tracked",
    "cuft_source",
    "user_email",
    "user_phone",
    "form_type",
    "form_id",
    "submitted_at"
  ],
  "allOf": [
    {
      "properties": {
        "event": {
          "type": "string",
          "const": "generate_lead",
          "description": "Event name for GTM conversion trigger"
        },
        "currency": {
          "type": "string",
          "const": "USD",
          "description": "Currency code (always USD)"
        },
        "value": {
          "type": "number",
          "const": 0,
          "description": "Lead value (default 0)"
        },
        "cuft_tracked": {
          "type": "boolean",
          "const": true,
          "description": "Constitutional compliance marker"
        },
        "cuft_source": {
          "type": "string",
          "enum": [
            "elementor_pro_lead",
            "contact_form_7_lead",
            "ninja_forms_lead",
            "gravity_forms_lead",
            "avada_forms_lead"
          ],
          "description": "Framework source identifier for lead events"
        }
      }
    },
    {
      "description": "Must have at least one click ID",
      "anyOf": [
        {"required": ["click_id"]},
        {"required": ["gclid"]},
        {"required": ["gbraid"]},
        {"required": ["wbraid"]},
        {"required": ["fbclid"]},
        {"required": ["msclkid"]},
        {"required": ["ttclid"]},
        {"required": ["li_fat_id"]},
        {"required": ["twclid"]},
        {"required": ["snap_click_id"]},
        {"required": ["pclid"]}
      ]
    }
  ],
  "properties": {
    "event": {
      "type": "string",
      "const": "generate_lead"
    },
    "currency": {
      "type": "string",
      "const": "USD"
    },
    "value": {
      "type": "number",
      "const": 0
    },
    "cuft_tracked": {
      "type": "boolean",
      "const": true
    },
    "cuft_source": {
      "type": "string"
    },
    "user_email": {
      "type": "string",
      "format": "email",
      "description": "Required: Valid email address"
    },
    "user_phone": {
      "type": "string",
      "minLength": 1,
      "description": "Required: Phone number"
    },
    "form_type": {
      "type": "string",
      "enum": ["elementor", "cf7", "ninja", "gravity", "avada"]
    },
    "form_id": {
      "type": "string",
      "minLength": 1
    },
    "form_name": {
      "type": "string"
    },
    "submitted_at": {
      "type": "string",
      "format": "date-time"
    },
    "click_id": {
      "type": "string",
      "description": "Generic click identifier"
    },
    "gclid": {
      "type": "string",
      "description": "Google Ads click identifier"
    },
    "gbraid": {
      "type": "string",
      "description": "Google iOS click identifier"
    },
    "wbraid": {
      "type": "string",
      "description": "Google Web-to-App click identifier"
    },
    "fbclid": {
      "type": "string",
      "description": "Facebook click identifier"
    },
    "msclkid": {
      "type": "string",
      "description": "Microsoft Ads click identifier"
    },
    "ttclid": {
      "type": "string",
      "description": "TikTok click identifier"
    },
    "li_fat_id": {
      "type": "string",
      "description": "LinkedIn click identifier"
    },
    "twclid": {
      "type": "string",
      "description": "Twitter/X click identifier"
    },
    "snap_click_id": {
      "type": "string",
      "description": "Snapchat click identifier"
    },
    "pclid": {
      "type": "string",
      "description": "Pinterest click identifier"
    },
    "utm_source": {
      "type": "string"
    },
    "utm_medium": {
      "type": "string"
    },
    "utm_campaign": {
      "type": "string"
    },
    "utm_term": {
      "type": "string"
    },
    "utm_content": {
      "type": "string"
    },
    "page_location": {
      "type": "string",
      "format": "uri"
    },
    "page_referrer": {
      "type": "string",
      "format": "uri"
    },
    "page_title": {
      "type": "string"
    },
    "language": {
      "type": "string"
    },
    "screen_resolution": {
      "type": "string",
      "pattern": "^\\d+x\\d+$"
    },
    "engagement_time_msec": {
      "type": "number",
      "minimum": 0
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "event": "generate_lead",
      "currency": "USD",
      "value": 0,
      "cuft_tracked": true,
      "cuft_source": "elementor_pro_lead",
      "form_type": "elementor",
      "form_id": "elementor-widget-7a2c4f9",
      "form_name": "Contact Form",
      "user_email": "user@example.com",
      "user_phone": "+1-555-0123",
      "submitted_at": "2025-01-01T12:00:00.000Z",
      "gclid": "abc123xyz",
      "utm_source": "google",
      "utm_medium": "cpc",
      "utm_campaign": "summer_sale",
      "page_location": "https://example.com/contact"
    }
  ]
}